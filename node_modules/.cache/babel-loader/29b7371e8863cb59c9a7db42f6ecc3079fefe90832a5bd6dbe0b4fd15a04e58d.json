{"ast":null,"code":"import React,{Component,useEffect,useState}from\"react\";import{addTask,getTasks,updateTask,deleteTask}from\"./services/taskServices\";import{DragDropContext,Droppable,Draggable}from\"react-beautiful-dnd\";import{Paper,TextField,Checkbox,Button}from\"@material-ui/core\";import\"./App.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";class App extends Component{constructor(){super(...arguments);this.state={tasks:[],currentTask:\"\"};this.handleChange=_ref=>{let{currentTarget:input}=_ref;this.setState({currentTask:input.value});};this.handleSubmit=async e=>{e.preventDefault();const{currentTask,tasks}=this.state;try{const position=tasks.length;// Assign position based on the number of tasks\nconst{data}=await addTask({task:currentTask,position:position// Include the 'position' field when adding a task\n});this.setState(prevState=>({tasks:[...prevState.tasks,data],currentTask:\"\"}));}catch(error){console.log(error);}};this.handleUpdate=async currentTask=>{const originalTasks=this.state.tasks;try{const tasks=[...originalTasks];const index=tasks.findIndex(task=>task._id===currentTask);tasks[index]={...tasks[index]};tasks[index].completed=!tasks[index].completed;this.setState({tasks});await updateTask(currentTask,{completed:tasks[index].completed});}catch(error){this.setState({tasks:originalTasks});console.log(error);}};this.handleDelete=async currentTask=>{const originalTasks=this.state.tasks;try{const tasks=originalTasks.filter(task=>task._id!==currentTask);this.setState({tasks});await deleteTask(currentTask);}catch(error){this.setState({tasks:originalTasks});console.log(error);}};this.onDragEnd=async result=>{if(!result.destination){return;}const tasks=Array.from(this.state.tasks);const[reorderedItem]=tasks.splice(result.source.index,1);tasks.splice(result.destination.index,0,reorderedItem);this.setState({tasks});try{// Prepare the data to send to the backend (tasks with updated positions)\nconst updatedTasks=tasks.map((task,index)=>({...task,position:index// Assign the new position to each task\n}));// Make an API call to update task positions on the backend\nawait axios.put(\"https://xyz-9nky.onrender.com/api/tasks/updatePositions\",updatedTasks);}catch(error){console.log(error);// Handle error appropriately\n}// Update backend with new task order\n// Make an API call here to update task positions in your database\n};}async componentDidMount(){try{const{data}=await getTasks();this.setState({tasks:data});}catch(error){console.log(error);}}render(){return/*#__PURE__*/_jsx(\"div\",{className:\"App flex\",children:/*#__PURE__*/_jsxs(Paper,{elevation:3,className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"heading\",children:\"TO-DO\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,className:\"flex\",style:{margin:\"15px 0\"},children:[/*#__PURE__*/_jsx(TextField,{variant:\"outlined\",size:\"small\",style:{width:\"80%\"},value:this.state.currentTask,required:true,onChange:this.handleChange,placeholder:\"Add New TO-DO\"}),/*#__PURE__*/_jsx(Button,{style:{height:\"40px\"},color:\"primary\",variant:\"outlined\",type:\"submit\",children:\"Add task\"})]}),/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:this.onDragEnd,children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"tasks\",children:provided=>/*#__PURE__*/_jsxs(\"div\",{ref:provided.innerRef,...provided.droppableProps,children:[this.state.tasks.map((task,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:task._id,index:index,children:provided=>/*#__PURE__*/_jsx(\"div\",{ref:provided.innerRef,...provided.draggableProps,...provided.dragHandleProps,children:/*#__PURE__*/_jsxs(Paper,{className:\"flex task_container\",children:[/*#__PURE__*/_jsx(Checkbox,{checked:task.completed,onClick:()=>this.handleUpdate(task._id),color:\"primary\"}),/*#__PURE__*/_jsx(\"div\",{className:task.completed?\"task line_through\":\"task\",children:task.task}),/*#__PURE__*/_jsx(Button,{onClick:()=>this.handleDelete(task._id),color:\"secondary\",children:\"delete\"})]})})},task._id)),provided.placeholder]})})})]})});}}export default App;","map":{"version":3,"names":["React","Component","useEffect","useState","addTask","getTasks","updateTask","deleteTask","DragDropContext","Droppable","Draggable","Paper","TextField","Checkbox","Button","axios","jsx","_jsx","jsxs","_jsxs","App","constructor","arguments","state","tasks","currentTask","handleChange","_ref","currentTarget","input","setState","value","handleSubmit","e","preventDefault","position","length","data","task","prevState","error","console","log","handleUpdate","originalTasks","index","findIndex","_id","completed","handleDelete","filter","onDragEnd","result","destination","Array","from","reorderedItem","splice","source","updatedTasks","map","put","componentDidMount","render","className","children","elevation","onSubmit","style","margin","variant","size","width","required","onChange","placeholder","height","color","type","droppableId","provided","ref","innerRef","droppableProps","draggableId","draggableProps","dragHandleProps","checked","onClick"],"sources":["C:/Users/1212a/OneDrive/Desktop/intership Projects/to do/todo-mern-app/client/src/App.js"],"sourcesContent":["import React, { Component, useEffect, useState } from \"react\";\r\nimport {\r\n  addTask,\r\n  getTasks,\r\n  updateTask,\r\n  deleteTask,\r\n} from \"./services/taskServices\";\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport { Paper, TextField, Checkbox, Button } from \"@material-ui/core\";\r\nimport \"./App.css\";\r\nimport axios from \"axios\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    tasks: [],\r\n    currentTask: \"\",\r\n  };\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      const { data } = await getTasks();\r\n      this.setState({ tasks: data });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  handleChange = ({ currentTarget: input }) => {\r\n    this.setState({ currentTask: input.value });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { currentTask, tasks } = this.state;\r\n\r\n    try {\r\n      const position = tasks.length; // Assign position based on the number of tasks\r\n      const { data } = await addTask({\r\n        task: currentTask,\r\n        position: position, // Include the 'position' field when adding a task\r\n      });\r\n\r\n      this.setState((prevState) => ({\r\n        tasks: [...prevState.tasks, data],\r\n        currentTask: \"\",\r\n      }));\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  handleUpdate = async (currentTask) => {\r\n    const originalTasks = this.state.tasks;\r\n    try {\r\n      const tasks = [...originalTasks];\r\n      const index = tasks.findIndex((task) => task._id === currentTask);\r\n      tasks[index] = { ...tasks[index] };\r\n      tasks[index].completed = !tasks[index].completed;\r\n      this.setState({ tasks });\r\n      await updateTask(currentTask, {\r\n        completed: tasks[index].completed,\r\n      });\r\n    } catch (error) {\r\n      this.setState({ tasks: originalTasks });\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  handleDelete = async (currentTask) => {\r\n    const originalTasks = this.state.tasks;\r\n    try {\r\n      const tasks = originalTasks.filter((task) => task._id !== currentTask);\r\n      this.setState({ tasks });\r\n      await deleteTask(currentTask);\r\n    } catch (error) {\r\n      this.setState({ tasks: originalTasks });\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  onDragEnd = async (result) => {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n\r\n    const tasks = Array.from(this.state.tasks);\r\n    const [reorderedItem] = tasks.splice(result.source.index, 1);\r\n    tasks.splice(result.destination.index, 0, reorderedItem);\r\n\r\n    this.setState({ tasks });\r\n\r\n    try {\r\n      // Prepare the data to send to the backend (tasks with updated positions)\r\n      const updatedTasks = tasks.map((task, index) => ({\r\n        ...task,\r\n        position: index, // Assign the new position to each task\r\n      }));\r\n\r\n      // Make an API call to update task positions on the backend\r\n      await axios.put(\r\n        \"https://xyz-9nky.onrender.com/api/tasks/updatePositions\",\r\n        updatedTasks\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n      // Handle error appropriately\r\n    }\r\n\r\n    // Update backend with new task order\r\n    // Make an API call here to update task positions in your database\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App flex\">\r\n        <Paper elevation={3} className=\"container\">\r\n          <div className=\"heading\">TO-DO</div>\r\n          <form\r\n            onSubmit={this.handleSubmit}\r\n            className=\"flex\"\r\n            style={{ margin: \"15px 0\" }}\r\n          >\r\n            <TextField\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              style={{ width: \"80%\" }}\r\n              value={this.state.currentTask}\r\n              required={true}\r\n              onChange={this.handleChange}\r\n              placeholder=\"Add New TO-DO\"\r\n            />\r\n            <Button\r\n              style={{ height: \"40px\" }}\r\n              color=\"primary\"\r\n              variant=\"outlined\"\r\n              type=\"submit\"\r\n            >\r\n              Add task\r\n            </Button>\r\n          </form>\r\n          <DragDropContext onDragEnd={this.onDragEnd}>\r\n            <Droppable droppableId=\"tasks\">\r\n              {(provided) => (\r\n                <div ref={provided.innerRef} {...provided.droppableProps}>\r\n                  {this.state.tasks.map((task, index) => (\r\n                    <Draggable\r\n                      key={task._id}\r\n                      draggableId={task._id}\r\n                      index={index}\r\n                    >\r\n                      {(provided) => (\r\n                        <div\r\n                          ref={provided.innerRef}\r\n                          {...provided.draggableProps}\r\n                          {...provided.dragHandleProps}\r\n                        >\r\n                          <Paper className=\"flex task_container\">\r\n                            <Checkbox\r\n                              checked={task.completed}\r\n                              onClick={() => this.handleUpdate(task._id)}\r\n                              color=\"primary\"\r\n                            />\r\n                            <div\r\n                              className={\r\n                                task.completed ? \"task line_through\" : \"task\"\r\n                              }\r\n                            >\r\n                              {task.task}\r\n                            </div>\r\n                            <Button\r\n                              onClick={() => this.handleDelete(task._id)}\r\n                              color=\"secondary\"\r\n                            >\r\n                              delete\r\n                            </Button>\r\n                          </Paper>\r\n                        </div>\r\n                      )}\r\n                    </Draggable>\r\n                  ))}\r\n                  {provided.placeholder}\r\n                </div>\r\n              )}\r\n            </Droppable>\r\n          </DragDropContext>\r\n        </Paper>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}